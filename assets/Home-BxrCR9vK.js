import{r as _,u as h,j as e,a as P,L as N,b as d,O as L}from"./index-CwL0gbn2.js";import{T as S,D as f,g as b,a as x,E as k}from"./api-DMv28n5_.js";const y=t=>({get:()=>{const s=window.localStorage.getItem(t);try{return s&&JSON.parse(s)}catch{return s}},set:s=>{const n=s?JSON.stringify(s):String(s);window.localStorage.setItem(t,n)}}),q=({key:t,initialValue:s,onSuccess:n})=>{const{get:c,set:i}=y(t);return _.useEffect(()=>{(()=>{const l=c();if(l){n(l);return}i(s),n(s)})()},[]),[i,c]},E="_Search_15z4a_1",O="_Search__input_15z4a_7",I="search-query";function T(){const[t,s]=_.useState(""),[n,c]=h(),i=a=>{if(s(a),a){c({query:a});return}const g=Object.fromEntries(n.entries()),{query:o,...p}=g;c(p)},[r]=q({key:I,initialValue:"",onSuccess:i}),l=a=>{s(a.target.value)},m=()=>{const a=t.trim().toLowerCase();if(r(a),a){c({query:a});return}c({})};return e.jsxs("div",{className:E,children:[e.jsx("input",{className:O,type:"text",name:"search",id:"search",value:t,onChange:l}),e.jsx("button",{type:"button",onClick:m,children:"Search"})]})}const v="_List__item_mapnn_1";function C({item:t}){const{url:s=""}=t,n=s.split("/").filter(r=>!!r),c=P(),i=n[n.length-1]||t.id;return e.jsxs("li",{className:v,children:[e.jsx("p",{children:t.name}),e.jsx(N,{to:`/pockemon/${i}${c.search}`,children:"Learn more"})]},t.name)}const w="_List_dkpve_1";function F({items:t}){return e.jsx("ul",{className:w,children:t.map(s=>e.jsx(C,{item:s},s.name))})}const H="_Pagination_db2t8_1",R="_Pagination__list_db2t8_8",u="_Pagination__item_db2t8_17",j="_Pagination__empty_db2t8_22",A="_Pagination__active_db2t8_27",$=(t,s)=>{const n=[];for(let r=1;r<=s;r+=1)r>=t-1&&r<=t+1&&n.push(r);return n.length===2&&n[0]===1&&n.push(3),n.length===2&&n[0]!==1&&n.unshift(s-2),n};function M({total:t=S,perPage:s=f}){const[n,c]=h(),i=Math.ceil(t/s),r=Number(n.get("page"))||1,l=a=>{const g=Object.fromEntries(n.entries());a!==r&&c({...g,page:String(a)})},m=$(r,i);return e.jsx("div",{className:H,children:e.jsxs("ol",{className:R,children:[m[0]!==1&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:u,children:e.jsx("button",{onClick:()=>l(1),type:"button",children:"1"})},1),e.jsx("li",{className:j,children:"..."})]}),m.map(a=>e.jsx("li",{className:u,children:e.jsx("button",{className:r===a?A:"",onClick:()=>l(a),type:"button",children:a})},a)),m[m.length-1]!==i&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:j,children:"..."}),e.jsx("li",{className:u,children:e.jsx("button",{onClick:()=>l(i),type:"button",children:i})},i)]})]})})}const Q="_Header_qlbqg_1",U="_Main_qlbqg_10",G="_Pockemon_qlbqg_14",z="_Pockemon__main_qlbqg_20",D="_Pockemon__aside_qlbqg_24";function Y(){const[t,s]=_.useState({isLoading:!1,error:null,items:[]}),[n]=h(),c=_.useCallback(g=>{if(s({isLoading:!0,error:null,items:[]}),g){b(g).then(o=>{s({isLoading:!1,error:null,items:[o]})}).catch(o=>{s({isLoading:!1,error:{message:o.message},items:[]})});return}x().then(o=>{s({isLoading:!1,error:null,items:o.results})}).catch(o=>{s({isLoading:!1,error:{message:o.message},items:[]})})},[]),i=g=>{s({isLoading:!0,error:null,items:[]}),x({skip:(g-1)*f}).then(o=>{s({isLoading:!1,error:null,items:o.results})}).catch(o=>{s({isLoading:!1,error:{message:o.message},items:[]})})},r=n.get("page"),l=n.get("query")||"";_.useEffect(()=>{i(Number(r))},[r]),_.useEffect(()=>{c(l)},[l]);const m=!t.isLoading&&!t.error&&t.items.length>0,a=!t.isLoading&&!t.error&&t.items.length>1;return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:Q,children:e.jsx("div",{className:"container",children:e.jsx(T,{})})}),e.jsxs("main",{className:U,children:[e.jsxs("div",{className:"container",children:[t.isLoading&&e.jsx(d,{}),t.error&&e.jsx(k,{message:t.error.message}),m&&e.jsxs("div",{className:G,children:[e.jsx("div",{className:z,children:e.jsx(F,{items:t.items})}),e.jsx("aside",{className:D,children:e.jsx(_.Suspense,{fallback:e.jsx(d,{}),children:e.jsx(L,{})})})]})]}),e.jsx("div",{className:"container",children:a&&e.jsx(M,{})})]})]})}export{Y as default};
